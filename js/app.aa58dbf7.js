(function(t){function e(e){for(var i,s,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],i=!0,r=1;r<o.length;r++){var l=o[r];0!==a[l]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=o[0]))}return t}var i={},a={app:0},n=[];function s(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=i,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(o,i,function(e){return t[e]}.bind(null,i));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/codinggoals/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0d89":function(t,e,o){"use strict";o("d1e7f")},"26c1":function(t,e,o){"use strict";o("b3a9")},"31c3":function(t,e,o){"use strict";o("e6b7")},3456:function(t,e,o){"use strict";o("546d")},"3ebe":function(t,e,o){"use strict";o("7271")},4069:function(t,e,o){},"4eec":function(t,e,o){},"546d":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("e792"),o("0cdd");var i=o("2b0e"),a=o("5f5b");i["default"].use(a["a"]);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("b-overlay",{staticClass:"center-overlay",attrs:{show:t.hideContent}},[t.isAuth?[o("aside",{staticClass:"sidebar",attrs:{id:"sidebar"}},[o("b-link",{staticClass:"side-link",attrs:{to:{name:"App"}}},[o("div",{staticClass:"side-icon-wrapper"},[o("i",{staticClass:"fas fa-home side-icon"})]),o("span",[t._v(" Главная ")])]),o("b-link",{staticClass:"side-link",attrs:{to:{name:"Profile"}}},[o("div",{staticClass:"side-icon-wrapper"},[o("i",{staticClass:"fas fa-user side-icon"})]),o("span",[t._v(" Личный кабинет ")])]),o("b-link",{staticClass:"side-link",attrs:{to:{name:"MyGoals"}}},[o("div",{staticClass:"side-icon-wrapper"},[o("i",{staticClass:"fas fa-bullseye side-icon"})]),o("span",[t._v(" Мои цели ")])]),o("b-link",{staticClass:"side-link",attrs:{to:{name:"CreateGoal"}}},[o("div",{staticClass:"side-icon-wrapper"},[o("i",{staticClass:"fas fa-plus-circle"})]),t._v(" Создать цель ")]),o("a",{staticClass:"side-link last-button",on:{click:t.toggleSidebar}},[o("div",{staticClass:"side-icon-wrapper side-icon-arrow"},[o("i",{staticClass:"fas fa-chevron-left side-icon"})]),o("span",[t._v(" Скрыть панель ")])]),o("b-link",{staticClass:"side-link",on:{click:t.doLogout}},[o("div",{staticClass:"side-icon-wrapper"},[o("i",{staticClass:"fas fa-sign-out-alt side-icon"})]),o("span",[t._v(" Выйти ")])])],1)]:[o("div",{staticClass:"navbar",attrs:{id:"nav"}},[o("b-link",{staticClass:"nav-link",attrs:{to:{name:"Home"}}},[t._v(" Главная ")]),"Login"!==t.$route.name?o("b-button",{staticClass:"nav-link",attrs:{variant:"outline-primary"},on:{click:function(e){return t.$router.push({name:"Login"})}}},[t._v(" Вход ")]):t._e()],1)],t.hideContent?t._e():o("div",{class:{main:t.isAuth},attrs:{id:"main"}},[o("b-container",[o("b-row",[o("b-col",{attrs:{cols:"12"}},[o("router-view")],1)],1)],1)],1)],2)],1)},s=[],r=(o("d3b7"),o("bc3a")),l=o.n(r),c=o("2f62"),u={computed:Object(c["b"])({hideContent:function(t){return t.hideContent},isAuth:function(t){return t.isAuth}}),created:function(){var t=this;l.a.defaults.baseURL="https://apicodinggoals.herokuapp.com",l.a.interceptors.request.use((function(t){var e=i["default"].prototype.$getCookie("jwt");return"/"===t.url[t.url.length-1]&&(t.url=t.url.substr(0,t.url.length-1)),null!=e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(e){return void 0!==e.response&&null!==e.response&&void 0!==e.response.status&&(401!==e.response.status&&419!==e.response.status||(t.$store.commit("setUser",null),t.$store.commit("setAuth",!1),t.$setCookie("jwt",null,0),t.$router.push({name:"Login"}))),e})),l.a.interceptors.response.use((function(t){return t}),(function(e){return void 0!==e.response&&null!==e.response&&void 0!==e.response.status&&(401!==e.response.status&&419!==e.response.status||(t.$store.commit("setUser",null),t.$store.commit("setAuth",!1),t.$setCookie("jwt",null,0),t.$router.push({name:"Login"}))),e}));var e=this.$getCookie("jwt");null!=e&&(this.$store.commit("setAuth",!0),this.$store.commit("setHideContent",!0),this.$store.dispatch("profileItem").finally((function(){t.$store.commit("setHideContent",!1)})))},methods:{doLogout:function(){var t=this;this.$swal({title:"Выход из аккаунта",text:"Вы уверены, что хотите выйти из аккаунта?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Выйти",cancelButtonText:"Отмена"}).then((function(e){e.isConfirmed&&t.$store.dispatch("logoutUser").finally((function(){t.$store.commit("setUser",null),t.$store.commit("setAuth",!1),t.$setCookie("jwt",null,0),t.$router.push({name:"Login"})}))}))},toggleSidebar:function(){var t=document.getElementById("sidebar"),e=document.getElementById("main");e.classList.toggle("full-main"),t.classList.toggle("sidebar-little")}}},d=u,f=(o("5c0b"),o("2877")),m=Object(f["a"])(d,n,s,!1,null,null,null),p=m.exports,b=(o("b0c0"),o("8c4f")),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"})},h=[],g={name:"Home",components:{},mounted:function(){this.$store.state.isAuth&&this.$router.push({name:"App"})}},_=g,C=Object(f["a"])(_,v,h,!1,null,null,null),y=C.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[o("b-form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.doLogin.apply(null,arguments)}}},[o("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("h2",{staticClass:"heading"},[t._v("Вход")]),o("b-form-group",{attrs:{id:"input-group-1",label:"Email:","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",type:"email",state:!a[0]&&(!!i||null),placeholder:"Введите email...",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{id:"input-group-3",label:"Пароль:","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3",type:"password",state:!a[0]&&(!!i||null),placeholder:"Введите пароль...",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("b-button",{staticClass:"auth-btn",attrs:{type:"submit",variant:"primary",disabled:i}},[t._v("Войти")]),o("b-form-text",{staticClass:"auth-no-account",attrs:{id:"no-account"}},[t._v(" Еще нет аккаунта? "),o("router-link",{attrs:{to:{name:"Registration"}}},[t._v("Зарегистрироваться")])],1)],1)]}}])})],1)},w=[],x=o("7bb1"),$={name:"Login",components:{ValidationObserver:x["a"],ValidationProvider:x["b"]},data:function(){return{form:{email:"",password:""}}},mounted:function(){this.$store.state.isAuth&&this.$router.push({name:"App"})},methods:{doLogin:function(){var t=this;this.$store.dispatch("authUser",this.form).then((function(){t.$router.push({name:"App"}),t.$store.commit("setHideContent",!0),t.$store.dispatch("profileItem").finally((function(){t.$store.commit("setHideContent",!1)}))})).catch((function(e){console.log(e),t.$swal({icon:"warning",title:"Что-то не так",text:"Произошла ошибка при авторизации"})}))}}},O=$,P=(o("26c1"),Object(f["a"])(O,k,w,!1,null,"1d088595",null)),j=P.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[o("b-form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.doRegistration.apply(null,arguments)}}},[o("h2",{staticClass:"heading"},[t._v("Регистрация")]),o("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{id:"input-group-1",label:"Email","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",type:"email",state:!a[0]&&(!!i||null),placeholder:"Введите email...",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Name",rules:"required|min:1|max:24"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{id:"input-group-2",label:"Ваше имя","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",type:"text",state:!a[0]&&(!!i||null),placeholder:"Введите имя...",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Password",rules:"required|min:6|max:24"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{id:"input-group-3",label:"Пароль","label-for":"input-3"}},[o("b-form-input",{attrs:{id:"input-3",type:"password",state:!a[0]&&(!!i||null),placeholder:"Введите пароль...",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Confirm",rules:"required|min:6|max:24|password:@Password"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{id:"input-group-4",label:"Подтвердите пароль","label-for":"input-4"}},[o("b-form-input",{attrs:{id:"input-4",type:"password",state:!a[0]&&(!!i||null),placeholder:"Подтвердите пароль...",required:""},model:{value:t.form.passwordConfirm,callback:function(e){t.$set(t.form,"passwordConfirm",e)},expression:"form.passwordConfirm"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),o("b-button",{staticClass:"auth-btn",attrs:{type:"submit",variant:"primary",disabled:i}},[t._v("Зарегистрироваться")]),o("b-form-text",{staticClass:"auth-exist",attrs:{id:"exist-account"}},[t._v(" Уже есть аккаунт? "),o("router-link",{attrs:{to:{name:"Login"}}},[t._v("Войти")])],1)],1)]}}])})],1)},E=[],G=(o("e9c4"),{name:"Registration.vue",components:{ValidationObserver:x["a"],ValidationProvider:x["b"]},data:function(){return{form:{email:"",password:"",passwordConfirm:"",name:""}}},mounted:function(){this.$store.state.isAuth&&this.$router.push({name:"App"})},methods:{doRegistration:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.password_confirmation=e.passwordConfirm,delete e.passwordConfirm,this.$store.dispatch("registerUser",e).then((function(){t.$swal({icon:"success",title:"Регистрация успешна",text:"Теперь вы можете авторизоваться"}).then((function(){t.$router.push({name:"Login"})}))})).catch((function(){t.$swal({icon:"warning",title:"Что-то не так",text:"Произошла ошибка при регистрации"})}))}}}),A=G,I=(o("3456"),Object(f["a"])(A,S,E,!1,null,"456bb2c8",null)),M=I.exports,V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[o("h1",[t._v("Профиль")]),o("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[o("div",{staticClass:"avatar"},[o("img",{attrs:{src:"https://communityevolution.org/wp-content/uploads/2020/02/missing-profile-picture-1.jpg"}})]),o("h2",{staticClass:"pt-2"},[o("span",[t._v(t._s(t.item.name)+" "+t._s(t.item.surname)+" "+t._s(t.item.patro))])]),o("b-row",{staticClass:"user-info container-fluid d-flex justify-content-around"},[o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v(" Имя: "+t._s(t.item.name)+" ")]),o("span",{on:{click:function(e){return t.openEditModal("name")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Фамилия: "+t._s(t.item.surname))]),o("span",{on:{click:function(e){return t.openEditModal("surname")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Отчество: "+t._s(t.item.patro))]),o("span",{on:{click:function(e){return t.openEditModal("patro")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Email: "+t._s(t.item.email))]),o("span",{on:{click:function(e){return t.openEditModal("email")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Страна: "+t._s(t.item.country))]),o("span",{on:{click:function(e){return t.openEditModal("country")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Город: "+t._s(t.item.town))]),o("span",{on:{click:function(e){return t.openEditModal("town")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("Пол: "+t._s(t.item.gender))]),o("span",{on:{click:function(e){return t.openEditModal("gender")}}},[o("i",{staticClass:"fas fa-edit"})])]),o("b-col",{staticClass:"d-flex justify-content-between",attrs:{xl:"5"}},[o("span",[t._v("День рождения: "+t._s(t.item.birthday))]),o("span",{on:{click:function(e){return t.openEditModal("birthday")}}},[o("i",{staticClass:"fas fa-edit"})])])],1),o("b-modal",{staticClass:"editModal",attrs:{title:"Хотите изменить информацию о себе?"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[o("div",{staticClass:"d-flex flex-end"},[o("b-button",{staticClass:"float-right",attrs:{size:"md"},on:{click:function(e){t.showEditModal=!1}}},[t._v(" Отмена ")]),o("b-button",{staticClass:"float-right",attrs:{size:"md"},on:{click:t.edit}},[t._v(" Сохранить ")])],1)]},proxy:!0}]),model:{value:t.showEditModal,callback:function(e){t.showEditModal=e},expression:"showEditModal"}},[o("div",{staticClass:"d-flex flex-column"},[o("span",[t._v("Введите новое значение")]),o("b-input",{attrs:{type:"text"},model:{value:t.editField,callback:function(e){t.editField=e},expression:"editField"}})],1)])],1)])},q=[],T={name:"Profile",data:function(){return{editField:"",editData:null,showEditModal:!1,loading:!1}},mounted:function(){var t=this;null===this.item&&(this.loading=!0,this.$store.dispatch("profileItem").finally((function(){t.loading=!1})))},computed:Object(c["b"])({item:function(t){return t.profileItem}}),methods:{openEditModal:function(t){this.editData=t,this.editField=this.item[t],this.showEditModal=!0},edit:function(){var t={};t[this.editData]=this.editField,this.item[this.editData]=this.editField,this.$store.dispatch("editProfileItem",t),this.showEditModal=!1}}},J=T,L=(o("3ebe"),Object(f["a"])(J,V,q,!1,null,"5a70f4ae",null)),H=L.exports,N=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[o("h1",[t._v("Цели всех участников проекта")]),o("b-row",t._l(t.items,(function(e){return o("b-col",{key:e.id,attrs:{xl:"4",lg:"6"}},[o("b-card",{staticClass:"m-4 card",attrs:{title:e.title,"img-src":"https://via.placeholder.com/350x200","img-alt":"Image","img-top":"",tag:"article"},on:{click:function(o){return t.openGoal(e.id)}}})],1)})),1)],1)},U=[],B={name:"App",data:function(){return{loading:!1}},mounted:function(){var t=this;this.loading=!0,this.$store.dispatch("loadAllGoals").finally((function(){t.loading=!1}))},computed:Object(c["b"])({items:function(t){return t.allGoals}}),methods:{openGoal:function(t){this.$router.push({name:"ViewGoal",params:{id:t}})}}},D=B,F=(o("5a20"),Object(f["a"])(D,N,U,!1,null,"59231a28",null)),R=F.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[o("h1",[t._v("Мои цели")]),o("b-row",t._l(t.items,(function(e){return o("b-col",{key:e.id,attrs:{xl:"4",lg:"6"}},[o("b-card",{staticClass:"m-4 card",attrs:{title:e.title,"img-src":"https://via.placeholder.com/350x200","img-alt":"Image","img-top":"",tag:"article"},on:{click:function(o){return t.openGoal(e.id)}}})],1)})),1)],1)},K=[],Q={name:"MyGoals",data:function(){return{loading:!1}},mounted:function(){var t=this;this.loading=!0,this.$store.dispatch("goalsItems").finally((function(){t.loading=!1}))},computed:Object(c["b"])({items:function(t){return t.goalsItems}}),methods:{openGoal:function(t){this.$router.push({name:"ViewGoal",params:{id:t}})}}},W=Q,X=(o("0d89"),Object(f["a"])(W,z,K,!1,null,"033af24f",null)),Y=X.exports,Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[o("h1",{staticClass:"mb-4"},[t._v("Создание цели")]),o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[o("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.createGoal.apply(null,arguments)}}},[o("h4",[t._v("Формулировка")]),o("b-row",{staticClass:"mb-2"},[o("b-col",{attrs:{lg:"6"}},[o("ValidationProvider",{attrs:{rules:"required|min:2|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{label:"Название цели"}},[o("b-form-input",{attrs:{state:!a[0]&&(!!i||null)},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("b-col",{attrs:{lg:"6"}},[o("ValidationProvider",{attrs:{rules:"required|min:2|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{label:"Критерий завершения"}},[o("b-form-input",{attrs:{state:!a[0]&&(!!i||null)},model:{value:t.form.endCriterion,callback:function(e){t.$set(t.form,"endCriterion",e)},expression:"form.endCriterion"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1)],1),o("h4",[t._v("Подробное описание")]),o("b-row",{staticClass:"mb-4"},[o("b-col",{attrs:{cols:"12"}},[o("ckeditor",{staticClass:"editor",attrs:{editor:t.editor},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),o("b-row",[o("b-col",{staticClass:"mb-2",attrs:{lg:"6"}},[o("h4",[t._v("Список задач")]),t._l(t.form.todo,(function(e,i){return[o("ValidationProvider",{key:i,attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.valid,s=a.errors;return[o("b-form-group",{attrs:{label:"Задача #"+(i+1)}},[o("div",{staticClass:"d-flex"},[o("span",{staticClass:"todo-form"},[o("b-form-input",{staticClass:"todo-input",attrs:{state:!s[0]&&(!!n||null)},model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"todo.title"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(s[0])+" ")])],1),t.form.todo.length>1?o("b-button",{staticClass:"delete-button",attrs:{variant:"danger"},on:{click:function(e){return t.deleteTodo(i)}}},[o("i",{staticClass:"fas fa-trash"})]):t._e()],1)])]}}],null,!0)})]})),o("b-button",{attrs:{variant:"secondary",type:"button"},on:{click:t.addTodo}},[t._v("Добавить задачу")])],2),o("b-col",{staticClass:"mb-2",attrs:{lg:"6"}},[o("h4",[t._v("Конфиденциальность")]),o("b-row",[o("b-col",{attrs:{cols:"6"}},[o("b-form-group",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Цель приватная? "),o("i",{staticClass:"far fa-question-circle",staticStyle:{"font-size":"12px"},attrs:{id:"hint-private"}})]},proxy:!0}],null,!0)},[o("b-form-radio-group",{attrs:{id:"radio-group-1",name:"radio-private"},model:{value:t.form.isPrivate,callback:function(e){t.$set(t.form,"isPrivate",e)},expression:"form.isPrivate"}},[o("b-form-radio",{attrs:{value:!0}},[t._v("Да")]),o("b-form-radio",{attrs:{value:!1}},[t._v("Нет")])],1)],1)],1),t.form.isPrivate?t._e():o("b-col",{attrs:{cols:"6"}},[o("b-form-group",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Комментарии? "),o("i",{staticClass:"far fa-question-circle",staticStyle:{"font-size":"12px"},attrs:{id:"hint-comment"}})]},proxy:!0}],null,!0)},[o("b-form-radio-group",{attrs:{id:"radio-group-2",name:"radio-comments"},model:{value:t.form.isCommentable,callback:function(e){t.$set(t.form,"isCommentable",e)},expression:"form.isCommentable"}},[o("b-form-radio",{attrs:{value:!0}},[t._v("Да")]),o("b-form-radio",{attrs:{value:!1}},[t._v("Нет")])],1)],1)],1)],1)],1)],1),o("b-button",{staticClass:"mt-5",attrs:{type:"submit",variant:"primary",disabled:i}},[t._v(" Создать ")])],1)]}}])}),o("b-tooltip",{attrs:{target:"hint-private",triggers:"hover"}},[t._v(" Приватные цели никто не видят, кроме вас ")]),o("b-tooltip",{attrs:{target:"hint-comment",triggers:"hover"}},[t._v(" Смогут ли другие пользователи оставлять комментарии к вашей цели? ")])],1)},tt=[],et=(o("a434"),o("fb3d")),ot=o.n(et),it={name:"CreateGoal",components:{ValidationObserver:x["a"],ValidationProvider:x["b"]},data:function(){return{form:{title:null,endCriterion:null,description:null,todo:[{title:"",checked:0}],isPrivate:!1,isCommentable:!0},defaultForm:{title:null,endCriterion:null,description:null,todo:[{title:"",checked:0}],isPrivate:!1,isCommentable:!0},defaultTodo:{title:"",checked:0},editor:ot.a,loading:!1}},methods:{createGoal:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.form));e.todo=JSON.stringify(e.todo),l.a.post("/api/goals/create",e).then((function(e){e.data&&void 0!==e.data.exception?t.$swal({title:"Ошибка",text:"Что-то пошло не так...",icon:"error"}):(t.form=JSON.parse(JSON.stringify(t.defaultForm)),t.$swal({title:"Успех",text:"Цель успешно создана",icon:"success"}))})).catch((function(){t.$swal({title:"Ошибка",text:"Что-то пошло не так...",icon:"error"})})).finally((function(){t.loading=!1}))},addTodo:function(){var t=JSON.parse(JSON.stringify(this.defaultTodo));this.form.todo.push(t)},deleteTodo:function(t){this.form.todo.splice(t,1)}}},at=it,nt=(o("bcc6"),Object(f["a"])(at,Z,tt,!1,null,"3e5041a8",null)),st=nt.exports,rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[t.item?o("div",[o("h1",{staticClass:"mb-5"},[t._v(t._s(t.item.title))]),o("h4",[t._v("Критерий завершения")]),o("p",{staticClass:"mb-4"},[t._v(t._s(t.item.endCriterion))]),o("h4",[t._v("Описание")]),o("div",{staticClass:"mb-4",domProps:{innerHTML:t._s(t.item.description)}}),o("h4",[t._v("Список задач")]),o("ul",{staticClass:"todo-list"},t._l(t.item.todo,(function(e){return o("li",{key:e.title,staticClass:"todo-item",class:{"todo-item-checked":e.checked}},[e.checked?o("i",{staticClass:"far fa-check-square"}):o("i",{staticClass:"far fa-square"}),t._v(" "+t._s(e.title)+" ")])})),0),null===t.item.user_id||t.item.user_id===t.$store.state.profileItem.id?o("b-button",{staticClass:"mt-5 mr-2",attrs:{variant:"primary"},on:{click:function(e){return t.$router.push({name:"EditGoal",params:{id:t.id,item:t.item}})}}},[t._v("Редактировать")]):t._e(),null===t.item.user_id||t.item.user_id===t.$store.state.profileItem.id?o("b-button",{staticClass:"mt-5",attrs:{variant:"danger"},on:{click:t.deleteGoal}},[t._v("Удалить")]):t._e()],1):t._e()])},lt=[],ct={name:"Goal",props:["id"],data:function(){return{loading:!1,item:null}},mounted:function(){this.loadItem()},methods:{loadItem:function(){var t=this;this.loading=!0,l.a.get("/api/goals/item/"+this.id).then((function(e){t.item=e.data,t.item.todo=JSON.parse(t.item.todo)})).finally((function(){t.loading=!1}))},deleteGoal:function(){var t=this;this.$swal({title:"Удаление цели",text:"Вы уверены, что хотите удалить цель?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Удалить",cancelButtonText:"Отмена"}).then((function(e){e.isConfirmed&&l.a.delete("/api/goals/delete/"+t.id).then((function(){t.$swal({title:"Успех",text:"Цель успешно удалена",icon:"success"}).then((function(){t.$router.push({name:"MyGoals"})}))}))}))}}},ut=ct,dt=(o("31c3"),Object(f["a"])(ut,rt,lt,!1,null,"2ef62fa6",null)),ft=dt.exports,mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.loading}},[o("h1",{staticClass:"mb-4"},[t._v("Редактирование цели")]),o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.invalid;return[o("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.updateGoal.apply(null,arguments)}}},[o("h4",[t._v("Формулировка")]),o("b-row",{staticClass:"mb-2"},[o("b-col",{attrs:{lg:"6"}},[o("ValidationProvider",{attrs:{rules:"required|min:2|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{label:"Название цели"}},[o("b-form-input",{attrs:{state:!a[0]&&(!!i||null)},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1),o("b-col",{attrs:{lg:"6"}},[o("ValidationProvider",{attrs:{rules:"required|min:2|max:255"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[o("b-form-group",{attrs:{label:"Критерий завершения"}},[o("b-form-input",{attrs:{state:!a[0]&&(!!i||null)},model:{value:t.form.endCriterion,callback:function(e){t.$set(t.form,"endCriterion",e)},expression:"form.endCriterion"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)})],1)],1),o("h4",[t._v("Подробное описание")]),o("b-row",{staticClass:"mb-4"},[o("b-col",{attrs:{cols:"12"}},[o("ckeditor",{staticClass:"editor",attrs:{editor:t.editor},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),o("b-row",[o("b-col",{staticClass:"mb-2",attrs:{lg:"6"}},[o("h4",[t._v("Список задач")]),t._l(t.form.todo,(function(e,i){return[o("ValidationProvider",{key:i,attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.valid,s=a.errors;return[o("b-form-group",{attrs:{label:"Задача #"+(i+1)}},[o("div",{staticClass:"d-flex"},[o("span",{staticClass:"todo-form"},[o("b-form-input",{staticClass:"todo-input",attrs:{state:!s[0]&&(!!n||null)},model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"todo.title"}}),o("b-form-invalid-feedback",[t._v(" "+t._s(s[0])+" ")])],1),t.form.todo.length>1?o("b-button",{staticClass:"delete-button",attrs:{variant:"danger"},on:{click:function(e){return t.deleteTodo(i)}}},[o("i",{staticClass:"fas fa-trash"})]):t._e()],1),o("b-form-checkbox",{attrs:{name:"checkbox-"+i,value:1,"unchecked-value":0},model:{value:e.checked,callback:function(o){t.$set(e,"checked",o)},expression:"todo.checked"}},[t._v(" Задача выполнена ")])],1)]}}],null,!0)})]})),o("b-button",{attrs:{variant:"secondary",type:"button"},on:{click:t.addTodo}},[t._v("Добавить задачу")])],2),o("b-col",{staticClass:"mb-2",attrs:{lg:"6"}},[o("h4",[t._v("Конфиденциальность")]),o("b-row",[o("b-col",{attrs:{cols:"6"}},[o("b-form-group",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Цель приватная? "),o("i",{staticClass:"far fa-question-circle",staticStyle:{"font-size":"12px"},attrs:{id:"hint-private",title:"Приватные цели кроме вас никто не сможет просматривать"}})]},proxy:!0}],null,!0)},[o("b-form-radio-group",{attrs:{id:"radio-group-1",name:"radio-private"},model:{value:t.form.isPrivate,callback:function(e){t.$set(t.form,"isPrivate",e)},expression:"form.isPrivate"}},[o("b-form-radio",{attrs:{value:!0}},[t._v("Да")]),o("b-form-radio",{attrs:{value:!1}},[t._v("Нет")])],1)],1)],1),t.form.isPrivate?t._e():o("b-col",{attrs:{cols:"6"}},[o("b-form-group",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Комментарии? "),o("i",{staticClass:"far fa-question-circle",staticStyle:{"font-size":"12px"},attrs:{title:"Можно ли другим пользователям оставлять комментарии для вашей цели?"}})]},proxy:!0}],null,!0)},[o("b-form-radio-group",{attrs:{id:"radio-group-2",name:"radio-comments"},model:{value:t.form.isCommentable,callback:function(e){t.$set(t.form,"isCommentable",e)},expression:"form.isCommentable"}},[o("b-form-radio",{attrs:{value:!0}},[t._v("Да")]),o("b-form-radio",{attrs:{value:!1}},[t._v("Нет")])],1)],1)],1)],1)],1)],1),o("b-button",{staticClass:"mt-5",attrs:{type:"submit",variant:"primary",disabled:i}},[t._v(" Редактировать ")])],1)]}}])})],1)},pt=[],bt=(o("25f0"),{name:"CreateGoal",components:{ValidationObserver:x["a"],ValidationProvider:x["b"]},props:["item","id"],data:function(){return{form:this.item,defaultForm:{title:null,endCriterion:null,description:null,todo:[{title:"",checked:0}],isPrivate:!1,isCommentable:!0},defaultTodo:{title:"",checked:0},editor:ot.a,loading:!1}},mounted:function(){null!==this.item&&void 0!==this.item||this.loadItem(this.id)},methods:{loadItem:function(){var t=this;this.loading=!0,l.a.get("/api/goals/item/"+this.id).then((function(e){t.form=e.data,t.form.todo=JSON.parse(t.form.todo)})).finally((function(){t.loading=!1}))},updateGoal:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.form));e.todo=JSON.stringify(e.todo),e.isPrivate=e.isPrivate.toString(),e.isCommentable=e.isCommentable.toString(),l.a.post("/api/goals/edit/"+this.id,e).then((function(e){e.data&&void 0!==e.data.exception?t.$swal({title:"Ошибка",text:"Что-то пошло не так...",icon:"error"}):t.$swal({title:"Успех",text:"Цель успешно обновлена",icon:"success"}).then((function(){t.$router.push({name:"ViewGoal",params:{id:t.id}})}))})).catch((function(){t.$swal({title:"Ошибка",text:"Что-то пошло не так...",icon:"error"})})).finally((function(){t.loading=!1}))},addTodo:function(){var t=JSON.parse(JSON.stringify(this.defaultTodo));this.form.todo.push(t)},deleteTodo:function(t){this.form.todo.splice(t,1)}}}),vt=bt,ht=(o("a572"),Object(f["a"])(vt,mt,pt,!1,null,"459e9d1c",null)),gt=ht.exports;i["default"].use(b["a"]);var _t=[{path:"/",name:"App",component:R},{path:"/landing",name:"Home",component:y},{path:"/login",name:"Login",component:j},{path:"/registration",name:"Registration",component:M},{path:"/profile",name:"Profile",component:H},{path:"/goals/my",name:"MyGoals",component:Y},{path:"/goals/create",name:"CreateGoal",component:st},{path:"/goal/:id",name:"ViewGoal",component:ft,props:!0},{path:"/goal/edit/:id",name:"EditGoal",component:gt,props:!0}],Ct=new b["a"]({mode:"history",base:"/codinggoals/",routes:_t});Ct.beforeEach((function(t,e,o){var a="Login"===t.name||"Home"===t.name||"Registration"===t.name;i["default"].prototype.$isAuth()&&a?o({name:"App"}):i["default"].prototype.$isAuth()||a?o():o({name:"Home"})}));var yt=Ct;i["default"].use(c["a"]);var kt=new c["a"].Store({state:{isAuth:!1,user:null,hideContent:!1,profileItem:null,goalsItems:[],allGoals:[]},mutations:{setUser:function(t,e){t.user=e},setAuth:function(t,e){t.isAuth=e},setProfileItem:function(t,e){t.profileItem=e},setHideContent:function(t,e){t.hideContent=e},setGoalsItems:function(t,e){t.goalsItems=e},setAllGoals:function(t,e){t.allGoals=e}},getters:{getUser:function(t){return t.user},getProfileItem:function(t){return t.profileItem}},actions:{authUser:function(t,e){var o=t.commit;return new Promise((function(t,a){o("setHideContent",!0),l.a.post("/api/auth/login",e).then((function(e){var a=e.data;i["default"].prototype.$setCookie("jwt",a.access_token,10*a.expires_in),o("setAuth",!0),o("setUser",a.user),i["default"].prototype.$getCookie(),t()})).catch((function(){a()})).finally((function(){o("setHideContent",!1)}))}))},registerUser:function(t,e){var o=t.commit;return new Promise((function(t,i){o("setHideContent",!0),l.a.post("/api/auth/register",e).then((function(){t()})).catch((function(){i()})).finally((function(){o("setHideContent",!1)}))}))},logoutUser:function(t){var e=t.commit;return new Promise((function(t,o){e("setHideContent",!0),l.a.post("/api/auth/logout").then((function(){t()})).catch((function(){o()})).finally((function(){e("setHideContent",!1)}))}))},profileItem:function(t){var e=t.commit;return new Promise((function(t,o){l.a.get("/api/profile/item").then((function(o){e("setProfileItem",o.data),t()})).catch((function(){o()}))}))},editProfileItem:function(t,e){return new Promise((function(t,o){l.a.post("/api/profile/edit",e).then((function(){t()})).catch((function(){o()}))}))},goalsItems:function(t){var e=t.commit;return new Promise((function(t,o){l.a.get("/api/goals/useritems").then((function(o){e("setGoalsItems",o.data),t()})).catch((function(){o()}))}))},loadAllGoals:function(t){var e=t.commit;return new Promise((function(t,o){l.a.get("/api/goals/allitems").then((function(o){e("setAllGoals",o.data),t()})).catch((function(){o()}))}))}},modules:{}}),wt=o("5530"),xt=(o("159b"),o("b64b"),o("4c93"));Object.keys(xt).forEach((function(t){Object(x["c"])(t,xt[t])})),Object(x["c"])("email",Object(wt["a"])(Object(wt["a"])({},xt["email"]),{},{message:"Некорректный формат почты"})),Object(x["c"])("required",Object(wt["a"])(Object(wt["a"])({},xt["required"]),{},{message:"Поле обязательно для заполнения"})),Object(x["c"])("max",Object(wt["a"])(Object(wt["a"])({},xt["max"]),{},{message:function(t,e){var o=e.length;return o%10===1?"Максимум ".concat(o," символ"):o%10!==2&&o%10!==3&&o%10!==4||Math.floor(o/10)%10===1?"Максимум ".concat(o," символов"):"Максимум ".concat(o," символа")}})),Object(x["c"])("min",Object(wt["a"])(Object(wt["a"])({},xt["min"]),{},{message:function(t,e){var o=e.length;return o%10===1?"Минимум ".concat(o," символ"):o%10!==2&&o%10!==3&&o%10!==4||Math.floor(o/10)%10===1?"Минимум ".concat(o," символов"):"Минимум ".concat(o," символа")}})),Object(x["c"])("password",{params:["target"],validate:function(t,e){var o=e.target;return t===o},message:"Пароли не совпадают"});o("ac1f"),o("466d"),o("4d63"),o("c607"),o("2c3e");function $t(t,e){t.prototype.$getCookie=function(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(e)return e[2]},t.prototype.$setCookie=function(t,e,o){var i=new Date(Date.now()+1e3*o);i=i.toUTCString();var a=window.location.hostname;document.cookie=t+"="+e+"; path=/; expires="+i+"; domain="+a},t.prototype.$isAuth=function(){var e=t.prototype.$getCookie("jwt");return void 0!==e&&null!==e},t.prototype.$refreshToken=function(){e.dispatch("refreshUser")}}var Ot={init:$t},Pt=Ot,jt=o("f9d5"),St=o.n(jt),Et=(o("4413"),o("15f5"),o("7051"),o("6930")),Gt=o.n(Et),At=o("b458");i["default"].use(At["a"]);var It={confirmButtonColor:"#0069d9"};i["default"].use(St.a,It),i["default"].use(Gt.a),i["default"].config.productionTip=!1,Pt.init(i["default"],kt),new i["default"]({router:yt,store:kt,render:function(t){return t(p)}}).$mount("#app")},"5a20":function(t,e,o){"use strict";o("8c88")},"5c0b":function(t,e,o){"use strict";o("9c0c")},7271:function(t,e,o){},"8c88":function(t,e,o){},"9c0c":function(t,e,o){},a572:function(t,e,o){"use strict";o("4eec")},b3a9:function(t,e,o){},bcc6:function(t,e,o){"use strict";o("4069")},d1e7f:function(t,e,o){},e6b7:function(t,e,o){}});
//# sourceMappingURL=app.aa58dbf7.js.map